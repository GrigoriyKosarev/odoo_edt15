# ============================================
# Docker Compose для Odoo 15 - DEBUG режим
# ============================================
#
# Використання:
#   1. Перезбудувати образ: docker compose build
#   2. Запустити Debug Server в PyCharm (кнопка Debug)
#   3. Запустити: docker compose -f docker-compose.yml -f docker-compose.debug.yml up
#
# PyCharm налаштування:
#   Run → Edit Configurations → + → Python Debug Server
#   IDE host name: localhost
#   Port: 5678
#   Path mappings: /mnt/extra-addons → <ваш шлях>/odoo15/addons
#

services:
  odoo:
    # Для Linux: host.docker.internal не працює за замовчуванням
    extra_hosts:
      - "host.docker.internal:host-gateway"
    command: ["python3", "-c", "import pydevd_pycharm; pydevd_pycharm.settrace('host.docker.internal', port=5678, stdoutToServer=True, stderrToServer=True, suspend=False); import runpy; runpy.run_path('/usr/bin/odoo', run_name='__main__')"]
